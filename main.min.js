"use strict";var app=angular.module("pdf2web",["angularFileUpload"]);app.controller("UploadFile",function($scope,$upload,$timeout){$scope.isUploading=false;$scope.isConverting=false;$scope.onFileSelect=function($files){for(var i=0;i<$files.length;i++){var file=$files[i];$scope.upload=$upload.upload({url:"action/upload",file:file}).progress(function(evt){$scope.progress=parseInt(100*evt.loaded/evt.total);$scope.isUploading=true;if(evt.loaded==evt.total){$timeout(function(){$scope.isConverting=true},1e3)}}).success(function(data,status,headers,config){$scope.$emit("onFileUploaded");$scope.isUploading=false;$scope.isConverting=false})}}});app.controller("ListFolders",function($scope,$http){$scope.listDirs=function(){$http.get("/action/listDirs").then(function(resp){$scope.folders=resp.data})};$scope.$on("onFileUploaded",function(){$scope.listDirs()});$scope.onDelete=function($key){$http.get("/action/delete/"+$key).then(function(resp){$scope.listDirs()})}});